# Team Entry File Specification

The Team Entry file, created as a file called T.TMP, is a temporary file created by the game to consolidate all Player Team information into one file. 
All of the data structures which define the Team are compiled into the file. The last 7 data structures including the Species Data structure is copied 1-1 to the Contest File generated by the Pyrosaurus server.
This process is kicked off from the "Call" button on the Modem screen and made possible by configuration stored in the User File where Send Status Indicator is "Send" and the "Call" button is displayed.

## Anti-cheat features
The process of generating this file is to invoke anti-cheat features.
A Level checksum is included to validate that the player's local current level data matches that of the server. 
Additionally, Dino Species scores are re-calculated ensuring file mods have not been done outside of the game.

## Main File Map
Field|Size|Element Width|File Position|Comments
---|---|---|---|---
Pyro User ID|4|4|0| ||
Level check sum?|4|4|4|Need to confirm this||
Offset to Team data|2|2|8|Absolute file offset||
Offset Dino Names|2|2|A|Absolute file offset ||
Offset to Team Colors & Team Strings|2|2|C|Absolute file offset||
Num species|1|1|E|The following 6 data structures are repeated by this number||
Species data|20h * num species|1|F| ||
Move data|64h * 2 * num species|2| | ||
FITE dataset 1|FEh * num species|1| | ||
FITE dataset 2|32h * 2 * num species|2| | ||
FITE dataset 3|32h * 2 * num species|2| | ||
Decisions|17Dh * num species|1| | ||
Team Data|[See table](https://github.com/algae-disco/pyrosaurus-server/blob/main/Documentation/Team-Entry-File-Spec.md#team-data-structure)|[See table](https://github.com/algae-disco/pyrosaurus-server/blob/main/Documentation/Team-Entry-File-Spec.md#team-data-structure)| | ||
Dino names|One name per dino based on Team Data, \0 delimited, must be less than 50 characters per name| | | ||
Team colors|12|2| | ||
Team fire colors|6|1| | ||
Team name|\0 delimited| | | ||
Player name|\0 delimited| | | ||
Team location|\0 delimited| | | ||

## Team Data Structure 
Field|Size|Byte width|Comments
---|---|---|---
Num Dinos on team|1|1| ||
Team queen array|1 * num Dinos|1| ||
Species leg num|1 * num Dinos|1| ||
Dino struct data|3 * num Dinos|1|This matches up exactly with some of the weird data in the contest||
Team x positions|2 * num Dinos|2| ||
Team y positions|2 * num Dinos|2| ||
Team rotation|2 * num Dinos|2| ||
Some data cont|2 * num Dinos|2| ||
Dino init data|22 * num Dinos|1|A lot more research is needed to understand this data. This appears to be internal game data on the dino separate from the species.||
